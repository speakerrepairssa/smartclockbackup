<!-- Payslips Module Template -->
<div class="payslips-container" id="payslipsView" style="display: none;">
  
  <!-- Header -->
  <div class="payslips-header">
    <h1>ğŸ’° Payslip Management</h1>
    <p>Create payslip templates and schedule automatic delivery to employees via email or WhatsApp</p>
  </div>

  <!-- Main Grid -->
  <div class="payslips-grid">
    
    <!-- Left Column: Template Management -->
    <div class="payslip-card">
      <h2>ğŸ“ Payslip Template</h2>
      
      <!-- Template Selection -->
      <div class="template-controls">
        <select id="templateSelect">
          <option value="">Select a template...</option>
        </select>
        <button class="btn-primary" id="createTemplateBtn">+ New</button>
        <button class="btn-secondary" id="saveTemplateBtn">ğŸ’¾ Save</button>
        <button class="btn-danger" id="deleteTemplateBtn">ğŸ—‘ï¸ Delete</button>
      </div>

      <!-- Template Form -->
      <div class="form-group">
        <label for="templateName">Template Name</label>
        <input type="text" id="templateName" placeholder="e.g., Professional Monthly Payslip">
      </div>

      <!-- Visual Template Editor -->
      <div id="templateEditorContainer">
        <!-- Template editor will be loaded here -->
      </div>
    </div>

    <!-- Right Column: Employee Selection & Delivery -->
    <div>
      <!-- Employee Selection -->
      <div class="payslip-card">
        <h2>ğŸ‘¥ Select Employees</h2>
        
        <div class="employee-selection-controls">
          <button id="selectAllEmployees">âœ“ Select All</button>
          <button id="deselectAllEmployees">âœ— Deselect All</button>
          <div class="selected-count">
            Selected: <span id="selectedEmployeeCount">0</span>
          </div>
        </div>

        <div id="employeeList">
          <!-- Employees will be loaded here dynamically -->
        </div>
      </div>

      <!-- Delivery Options -->
      <div class="payslip-card" style="margin-top: 2rem;">
        <h2>ğŸ“¬ Delivery Options</h2>
        
        <h3>Delivery Methods</h3>
        <div class="delivery-options">
          <div class="delivery-option">
            <input type="checkbox" id="deliveryEmail" checked>
            <label for="deliveryEmail">ğŸ“§ Email</label>
          </div>
          <div class="delivery-option">
            <input type="checkbox" id="deliveryWhatsApp">
            <label for="deliveryWhatsApp">ğŸ’¬ WhatsApp</label>
          </div>
        </div>

        <h3>Schedule Delivery</h3>
        <div class="schedule-inputs">
          <div class="form-group">
            <label for="scheduleDate">Date</label>
            <input type="date" id="scheduleDate">
          </div>
          <div class="form-group">
            <label for="scheduleTime">Time</label>
            <input type="time" id="scheduleTime" value="09:00">
          </div>
        </div>

        <div class="action-buttons">
          <button class="btn-secondary" id="previewPayslipBtn">
            ğŸ‘ï¸ Preview
          </button>
          <button class="btn-success" id="sendPayslipsBtn">
            ğŸ“¤ Send Now
          </button>
          <button class="btn-primary" id="schedulePayslipsBtn">
            â° Schedule
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Scheduled Payslips -->
  <div class="payslip-card">
    <h2>ğŸ“… Scheduled Payslips</h2>
    <div id="scheduleList">
      <div class="empty-state">No scheduled payslips</div>
    </div>
  </div>

</div>

<!-- Preview Modal -->
<div id="previewModal" class="modal">
  <div class="modal-content">
    <div class="modal-header">
      <h2>Preview Payslip</h2>
      <button class="close-modal" onclick="document.getElementById('previewModal').style.display='none'">&times;</button>
    </div>
    <div class="preview-subject" id="previewSubject">
      Subject will appear here
    </div>
    <div class="preview-content" id="previewContent">
      Payslip content will appear here...
    </div>
  </div>
</div>

<script type="module">
  // This script will be integrated into the business dashboard
  // It's here for reference only
  
  // Import the payslips module
  import PayslipsModule from '../../modules/payslips/payslips.js';
  
  // Initialize when the payslips view is shown
  window.initPayslipsModule = async function(businessId) {
    const payslipsModule = new PayslipsModule(businessId);
    await payslipsModule.init();
    return payslipsModule;
  };
</script>
